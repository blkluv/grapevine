# Database Configuration
# Option 1 (Recommended): Single connection string - automatically parsed into components
DB_URL=postgresql://postgres:password@localhost:5432/grapevine

# Option 2 (Legacy): Full connection string for pg.Pool (not parsed, used as-is)
# DATABASE_URL=postgresql://postgres:password@localhost:5432/grapevine

# Option 3 (Fallback): Individual parameters (for local development)
# These are only used if DB_URL and DATABASE_URL are not set
# DB_HOST=localhost
# DB_PORT=5432
# DB_NAME=grapevine
# DB_USER=postgres
# DB_PASSWORD=password

# Connection Pool Configuration (automatically applied)
# - Max connections: 20
# - Idle timeout: 30 seconds
# - Connection timeout: 30 seconds
# - Statement timeout: 30 seconds
# - Keep-alive enabled with 10 second initial delay

# Database SSL Configuration
# SSL is automatically enabled in production (NODE_ENV=production)
# To disable SSL in production, set: DB_SSL=false
# For development, SSL is disabled by default. To enable, set: DB_SSL=true
#
# For AWS RDS and most managed databases, set rejectUnauthorized to false:
# DB_SSL_REJECT_UNAUTHORIZED=false
#
# Only set to true if you have a properly signed certificate chain:
# DB_SSL_REJECT_UNAUTHORIZED=true

# Server Configuration
PORT=3000
NODE_ENV=development
# Server origin URL for OpenAPI documentation and CORS
SERVER_ORIGIN=http://localhost:3000

# Logging Configuration
# Available levels: debug, info, warn, error
# Default: info (debug includes PostgreSQL query logs)
LOG_LEVEL=info

# API Configuration
API_VERSION=v1

# Pinata V3 Uploads Configuration
V3_UPLOADS_URL=https://uploads.pinata.cloud
V3_UPLOADS_ADMIN_KEY=your_pinata_admin_key_here
V3_UPLOADS_USER_ID=your_pinata_user_id_here
# Group ID for organizing uploads
V3_UPLOADS_GROUP_ID=

# Admin API key for admin server-to-server communication (admin-api-key header)
ADMIN_API_KEY=

# Pinata Backend API Configuration (for payment instructions)
PINATA_BACKEND_API_URL=https://api.pinata.cloud
PINATA_JWT_TOKEN=your_pinata_jwt_token_here

# Pinata Gateway Configuration
# Custom gateway host for serving content
PINATA_GATEWAY_HOST=

# Free Payment Instruction ID (for expired entries)
# This is the UUID of the payment instruction to use for free content
FREE_PAYMENT_INSTRUCTION_ID=
ENABLE_EXPIRY_WORKER=true
# Poll interval in milliseconds (default: 60000 = 1 minute)
EXPIRY_WORKER_POLL_INTERVAL=60000
# Batch size for processing expired entries (default: 100)
EXPIRY_WORKER_BATCH_SIZE=100
# Timeout for each worker cycle in milliseconds (default: 300000 = 5 minutes)
# If a cycle exceeds this timeout, the worker will be restarted
EXPIRY_WORKER_TIMEOUT=300000
# To disable the expiry worker, set the following variable to false
ENABLE_EXPIRY_WORKER=false

# Redis Configuration (optional)
# Redis cluster URL for distributed rate limiting and nonce management
# Leave empty to use in-memory storage (not recommended for production)
REDIS_CLUSTER_URL=

# Rate Limiting Configuration
# Maximum number of feeds allowed per wallet (default: 10000)
MAX_FEEDS_PER_WALLET=10000
# Maximum number of entries allowed per feed (default: 10000)
MAX_ENTRIES_PER_FEED=10000

# X402 Payment Configuration
# Wallet address to receive payments (required)
X402_PAY_TO_ADDRESS=pinata_wallet_address_here
# Network for payments (default: base-sepolia for testnet, use 'base' for mainnet)
X402_NETWORK=base-sepolia
# Facilitator URL - use https://x402.org/facilitator for testnet
# For mainnet, use: https://api.cdp.coinbase.com/platform/v2/x402
X402_FACILITATOR_URL=https://x402.org/facilitator
CDP_API_KEY_ID=
CDP_API_KEY_SECRET=
X402_FEED_CREATION_PRICE="$0.99"
X402_ENTRY_CREATION_PRICE="$0.10"